

@using Jocasta.Models;
@using Jocasta.Providers;
@{
    List<Service> lsServiceNew = (List<Service>)ViewBag.ListServiceNew;
    List<RoomCategory> lsRoomCategoryNew = (List<RoomCategory>)ViewBag.ListRoomCategoryNew;


    ViewBag.Title = "Trang chủ";
    ViewBag.Menu = "home";
}

@section slider{
    <!-- Slider -->
    <header class=" header slider-fade ">
        <div class="owl-carousel owl-theme ">
            <!-- The opacity on the image is made with "data-overlay-dark="number" . You can change it using the numbers 0-9. -->
            <div class="text-center item bg-img" data-overlay-dark="2" data-background="/Content/img/slider/2.jpg">
                <div class="v-middle caption">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-10 offset-md-1">
                                <span>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                </span>
                                <h4>The Jocasta Mai Linh Hotel</h4>
                                <div class="butn-light mt-30 mb-30"> <a href="#" data-scroll-nav="1"><span>Rooms & Suites</span></a> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center item bg-img" data-overlay-dark="2" data-background="/Content/img/slider/3.jpg">
                <div class="v-middle caption">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-10 offset-md-1">
                                <span>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                </span>
                                <h4>The Jocasta Mai Linh Hotel</h4>
                                <div class="butn-light mt-30 mb-30"> <a href="#" data-scroll-nav="1"><span>Rooms & Suites</span></a> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center item bg-img" data-overlay-dark="3" data-background="/Content/img/slider/1.jpg">
                <div class="v-middle caption">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-10 offset-md-1">
                                <span>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                    <i class="star-rating"></i>
                                </span>
                                <h4>The Jocasta Mai Linh Hotel</h4>
                                <div class="butn-light mt-30 mb-30"> <a href="#" data-scroll-nav="1"><span>Rooms & Suites</span></a> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Booking Search -->
    <div class="booking-wrapper">
        <div class="container">
            <div class="booking-inner clearfix">
                <div class="form1 clearfix d-flex justify-content-center">
                    <div class="col1 c1">
                        <div class="input1_wrapper">
                            <label>Check in</label>
                            <div class="input1_inner">
                                <input class="form-control input datepicker" id="check-in" placeholder="Check in">
                            </div>
                        </div>
                    </div>
                    <div class="col1 c2">
                        <div class="input1_wrapper">
                            <label>Check out</label>
                            <div class="input1_inner">
                                <input class="form-control input datepicker" id="check-out" placeholder="Check out">
                            </div>
                        </div>
                    </div>
                    @*<div class="col2 c3">
                        <div class="input1_wrapper">
                            <label>Adults</label>
                            <div class="input_inner">
                                <input type="text" class="input" placeholder="Adults">
                            </div>
                        </div>
                    </div>*@
                    <!--<div class="col2 c4">
                        <div class="input1_wrapper">
                            <label>Children(age <= 12)</label>
                            <div class="input_inner">
                                <input type="text" class="input" placeholder="Children(age <= 12)">
                            </div>
                        </div>                        
                    </div>-->
                    @*<div class="col2 c5">
                        <div class="select_wrapper">
                            <label>Room Category</label>
                            <div class="select_inner">
                                <select class="select2 select" id="select-room-category" style="width: 100%">
                                    <option value="">Room Category</option>
                                </select>
                            </div>
                        </div>
                    </div>*@
                    <div class="col1 c6">
                        <button class="btn-form1-submit" onclick="CheckNow();">Check Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<!-- About -->
<section class="about section-padding">
    <div class="container">
        <div class="row">
            <div class="col-md-6 mb-30 animate-box" data-animate-effect="fadeInUp">
                <span>
                    <i class="star-rating"></i>
                    <i class="star-rating"></i>
                    <i class="star-rating"></i>
                    <i class="star-rating"></i>
                    <i class="star-rating"></i>
                </span>
                <div class="section-title" style="font-size: 41px;">The Jocasta Mai Linh Hotel</div>
                <div class="section-subtitle" style="letter-spacing: 3px;">Tận hưởng - Trải nghiệm - Sang trọng</div>
                <p>Chào mừng Quý khách hàng đến với The Jocasta Mai Linh Hotel !</p>
                <p>
                    Phòng của khách sạn với không gian rộng lớn được trang bị đầy đủ tiện nghi, đây là nơi được rất nhiều khách ở lưu trong thời gian dài lựa chọn. Quý khách có thể thoải mái nghỉ ngơi, phóng tầm mắt ra xa ngắm nhìn khung cảnh thành phố
                    Phan Thiết tấp nập về đêm hoặc tự do chìm đắm trong không gian của riêng mình.
                </p>
                <!-- reservation -->
                <div class="reservations">
                    <div class="icon"><span class="flaticon-call"></span></div>
                    <div class="text">
                        <p>Đặt phòng</p> <a href="tel:855-100-4444">+84 846 076 166</a>
                    </div>
                </div>
            </div>
            <div class="col col-md-3 animate-box" data-animate-effect="fadeInUp">
                <img src="/Content/img/rooms/8.jpg" alt="" class="mt-90 mb-30">
            </div>
            <div class="col col-md-3 animate-box" data-animate-effect="fadeInUp">
                <img src="/Content/img/rooms/2.jpg" alt="">
            </div>
        </div>
    </div>
</section>


<!-- Rooms -->
<section class="rooms1 section-padding bg-cream" data-scroll-index="1">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="section-subtitle">The Jocasta Mai Linh Hotel</div>
                <div style="display: flex;justify-content: space-between; align-items: center;">
                    <div class="section-title">Rooms & Suites</div>
                    <div class="view-all"><a href="room-category/danh-sach/Currentpage=1">View All <i class="ti-arrow-right"></i></a></div>
                </div>
            </div>
        </div>
        <div class="row">

            @for (int indexRoomCategoryNew = 0; indexRoomCategoryNew < lsRoomCategoryNew.Count; indexRoomCategoryNew++)
            {
                <div class="col-md-4">
                    <div class="item">
                        <div class="position-re o-hidden"> <img src="@lsRoomCategoryNew[indexRoomCategoryNew].Image" alt=""> </div> <span class="category"><a href="booknow.html">Book</a></span>
                        <div class="con">
                            <h6><a href="room-detail.html">@HelperProvider.PrettyNumber(lsRoomCategoryNew[indexRoomCategoryNew].Price)/ Night</a></h6>
                            <h5><a href="room-detail.html">@lsRoomCategoryNew[indexRoomCategoryNew].Name</a> </h5>
                            <div class="line"></div>
                            <div class="row facilities">
                                <div class="col col-md-7">
                                    <ul>
                                        <li><i class="flaticon-bed"></i></li>
                                        <li><i class="flaticon-bath"></i></li>
                                        <li><i class="flaticon-breakfast"></i></li>
                                        <li><i class="flaticon-towel"></i></li>
                                    </ul>
                                </div>
                                <div class="col col-md-5 text-right">
                                    <div class="permalink"><a href="room-detail.html">Details <i class="ti-arrow-right"></i></a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>


<!-- Slider -->
<header class="header slider-fade">
    <div class="owl-carousel owl-theme">
        <div class="text-center item bg-img" data-overlay-dark="2" data-background="/Content/img/pricing/1.jpg">
            <div class="v-middle caption">
                <div class="container">
                    <div class="row">
                        <div class="col-md-10 offset-md-1">
                            <span>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                            </span>
                            <h4>The Jocasta Mai Linh Hotel</h4>
                            <div class="butn-light mt-30 mb-30"> <a href="room.html" data-scroll-nav="1"><span>Rooms & Suites</span></a> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center item bg-img" data-overlay-dark="2" data-background="/Content/img/pricing/2.jpg">
            <div class="v-middle caption">
                <div class="container">
                    <div class="row">
                        <div class="col-md-10 offset-md-1">
                            <span>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                            </span>
                            <h4>The Jocasta Mai Linh Hotel</h4>
                            <div class="butn-light mt-30 mb-30"> <a href="room.html" data-scroll-nav="1"><span>Rooms & Suites</span></a> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center item bg-img" data-overlay-dark="3" data-background="/Content/img/pricing/3.jpg">
            <div class="v-middle caption">
                <div class="container">
                    <div class="row">
                        <div class="col-md-10 offset-md-1">
                            <span>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                                <i class="star-rating"></i>
                            </span>
                            <h4>The Jocasta Mai Linh Hotel</h4>
                            <div class="butn-light mt-30 mb-30"> <a href="room.html" data-scroll-nav="1"><span>Rooms & Suites</span></a> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Facilties -->
<section class="facilties section-padding">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="section-subtitle">Our Services</div>
                <div style="display: flex;justify-content: space-between; align-items: center;">
                    <div class="section-title">Hotel Facilities</div>
                    <div class="view-all"><a href="room.html">View All <i class="ti-arrow-right"></i></a></div>
                </div>
            </div>
        </div>
        <div class="row">

            @for (int indexServiceNew = 0; indexServiceNew < lsServiceNew.Count; indexServiceNew++)
            {
                <div class="col-md-4">
                    <div class="pricing-card">
                        <img src="@lsServiceNew[indexServiceNew].Image" alt="" style="width:100%; height:220px;">
                        <div class="desc">
                            <div class="name" style="height:40px;">@lsServiceNew[indexServiceNew].Name</div>

                            <div class="" style="height:45px; overflow:hidden;">@Html.Raw(lsServiceNew[indexServiceNew].Description)</div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Reservation & Booking Form -->
<section class="testimonials">
    <div class="background bg-img bg-fixed section-padding pb-0" data-background="/Content/img/slider/2.jpg" data-overlay-dark="2">
        <div class="container">
            <div class="row">
                <!-- Reservation -->
                <div class="col-md-5 mb-30 mt-30">
                    <p><i class="star-rating"></i><i class="star-rating"></i><i class="star-rating"></i><i class="star-rating"></i><i class="star-rating"></i></p>
                    <h5>Mỗi phòng khách của chúng tôi đều có phòng tắm riêng, wi-fi, truyền hình cáp và bao gồm bữa sáng đầy đủ.</h5>
                    <div class="reservations mb-30">
                        <div class="icon color-1"><span class="flaticon-call"></span></div>
                        <div class="text">
                            <p class="color-1">Đặt phòng</p> <a class="color-1" href="tel:855-100-4444">+84 846 076 166</a>
                        </div>
                    </div>
                </div>
                <!-- Booking From -->
                <div class="col-md-5 offset-md-2">
                    <div class="booking-box">
                        <div class="head-box">
                            <h6>Rooms & Suites</h6>
                            <h4>Hotel Booking Form</h4>
                        </div>
                        <div class="booking-inner clearfix">
                            <form class="form1 clearfix">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="input1_wrapper">
                                            <label>Check in</label>
                                            <div class="input1_inner">
                                                <input type="text" class="form-control input datepicker" placeholder="Check in">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="input1_wrapper">
                                            <label>Check out</label>
                                            <div class="input1_inner">
                                                <input type="text" class="form-control input datepicker" placeholder="Check out">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="select_wrapper">
                                            <label>Adults</label>
                                            <div class="select_inner">
                                                <select class="select2 select" style="width: 100%">
                                                    <option value="0">Adults</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="select_wrapper">
                                            <label>Children</label>
                                            <div class="select_inner">
                                                <select class="select2 select" style="width: 100%">
                                                    <option value="0">Children</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <button type="submit" class="btn-form1-submit mt-15"><a href="booknow.html">Check Availability</a> </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section styles{
    <style>
        .input_inner input {
            display: block;
            width: 100%;
            font-size: 15px;
            color: #222;
            padding: 20px 40px 20px 20px;
            background: #fff;
            border: none;
            box-shadow: none;
            border-radius: 0;
        }

        .select2{
            height: 62.5px !important;
        }
        
    </style>
}

@section scripts{
    <script>
        const getListRoomCategory = async function () {
            let rq = await fetch('/api/RoomCategory/GetListRoomCategory', {
                method: 'get',
                headers: Enum.OptionHeaderDefault
            });
            let rs = await rq.json();
            if (CheckErrorResponse(rs) === false) return;

            console.log(rs);

            $('#select-room-category').html('');

            let html = '';

            if (GetObjectProperty(rs, 'status') === Enum.ResponseStatus.SUCCESS) {
                html += '<option value="">Room Category</option>'
                for (let i = 0; i < rs.data.length; i++) {
                    html += `<option value="${rs.data[i].RoomCategoryId}">${rs.data[i].Name}</option>`
                }
                $('#select-room-category').append(html);
            }
        }

        const CheckNow = async function () {
            
            let model = {
                CheckIn: $('#check-in').val(),
                CheckOut: $('#check-out').val()
            }
            
            if (model.CheckIn > model.CheckOut) {
                alert("Ngày check in phải nhỏ hơn ngày check out.");
                return;
            }
            

            if (GetObjectProperty(model, 'CheckIn') === '') { alert('Ngày check in không được để trống'); return; }
            if (GetObjectProperty(model, 'CheckOut') === '') { alert('Ngày check out không được để trống'); return; }

            console.log(model);

            let rq = await fetch('/api/Order/GetListRoom?checkIn=' + model.CheckIn + '&checkOut=' + model.CheckOut + '&keyword=', {
                method: 'get',
                headers: Enum.OptionHeaderDefault
            });
            let rs = await rq.json();
            if (CheckErrorResponse(rs) === false) return;
            if (GetObjectProperty(rs, 'status') === Enum.ResponseStatus.SUCCESS) {
                window.location.href = ('/check-now'); 
            }
        }

        const initPage = function () {
            getListRoomCategory();
        }

        initPage();

    </script>
}


